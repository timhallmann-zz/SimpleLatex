/*SimpleLatex v1.3.0
(c) Tim Hallmann
MIT License */
let SimpleLatex=function(){function e(C,D=!1,E=!1){if(null==C||0==C.length)return"";if(C=C.trim(),0==C.indexOf("\\l"))return C.substring(2);D&&(E?(C=C.replace(/ *(\n|\\\\)+ */g,"\\\\"),C=C.replace(/([^\\]) +(?!\\)/g,"$1&")):C=C.replace(/(\n|\\\\)+/g,"\\\\"));let F=[],G="";for(let H=0;H<C.length;H++){let I=F.length-1,J=F[I],K=C[H];if(-1<["\\b","\\N","\\Z","\\Q","\\A","\\R","\\C","\\H","\\O","\\S","==","~=","<=","=>","!="].indexOf(K+C[H+1])||-1<["%","\xB0","!"].indexOf(K)){-1<["\xB0","!"].indexOf(K)&&m(J)?F[I]+="!"==K?"!":y[K]:-1<["%","\xB0","!"].indexOf(K)?F.push("!"==K?"!":y[K]):(F.push(y[K+C[H+1]]),H++);continue}if(m(J)&&m(K))F[I]+=K;else if(o(K)){let L=q(C.substring(H));H+=L.length-1,F.push(L)}else F.push(K)}console.log(F);for(let I,H=0;H<F.length;H++)if(I=F[H],!!m(I)){let J=g(F[H],F[H+1]);F[H]=J.val,J.arg&&F.splice(H+1,1)}for(let I,H=0;H<F.length;H++)for(I=F[H],p(I)&&(1==I.indexOf("\\l")?F[H]=r(I).substring(2):F[H]=I[0]+e(r(I))+I[I.length-1]);m(F[H])&&m(F[H+1]);)F[H]+=F[H+1],F.splice(H+1,1);for(let H=F.length-1;0<H;H--)if("^"==F[H]||"_"==F[H]){let I="-"==F[H+1]?2:1;F[H-1]=s(F[H-1])+F[H]+"{"+(2==I?"-":"")+r(F[H+I])+"}",F.splice(H,1+I),H-=I}for(let H=0;H<F.length;H++)if("/"==F[H]){let I="-"==F[H+1]?2:1;F[H-1]="\\frac{"+r(F[H-1])+"}{"+(2==I?"-":"")+r(F[H+I])+"}",F.splice(H,1+I),H-=I}for(let I,H=0;H<F.length;H++)I=F[H],G+=E?r(I):s(I);return G}function g(C="",D=""){if(0==C.length)return{val:"",arg:!1};let E=null==y[C]?null:C,F="",G="";if(null==E){for(let H=0;null==E&&H<C.length;H++)for(let I=C.length;null==E&&I>H;I--){F=C.slice(0,H);let J=C.slice(H,I);if(G=C.slice(I,C.length),-1<A.indexOf(J))E=J;else if(2<I-H)for(let K=0;K<A.length;K++)if(0==A[K].indexOf(J)){if(null!=E){E="";break}E=A[K]}}if(null==E||""==E)return{val:C,arg:!1}}if(""==G&&p(D)){let H=h(E,r(D));return{val:F+H.val,arg:H.arg}}let H=g(G,D);return{val:F+h(E).val+H.val,arg:H.arg}}function h(C,D=""){null!=y[y[C]]&&(C=y[C]);let E=y[C];Number.isInteger(E)&&(E=w[E]),E=E.replace(/func/g,C);let F=-1<E.indexOf("arg");if(F){let G=n(D);E=E.replace(/arg(s{0,1})(p*)([0-9]*)/g,(H,I,J,K)=>{return H="s"==I?G[K]:D,3==J.length?e(H,!0,!0):2==J.length?e(H,!0):1==J.length?e(H):0==J.length?H||"":""})}return{val:E,arg:F}}function m(C=""){return /^[0-9a-z,.]+$/gi.test(C)}function n(C){let D=[],F="";for(let G=0;G<C.length;G++)if(o(C[G])){let H=q(C.substring(G));G+=H.length-1,F+=H}else","==C[G]?(D.push(F),F=""):F+=C[G];return D.push(F),D}function o(C){return null!=B[C]}function p(C=""){let D=C[0],E=C[C.length-1];return o(D)&&E==B[D]}function q(C){let D=C[0],E=B[D],F="",G=1,H=1;for(;0<G&&H<C.length;)C[H]==E?G--:C[H]==D&&G++,0<G&&(F+=C[H],H++);return D+F+E}function r(C=""){let D=C.length-1;return p(C)&&(C=C.substring(1,D)),C}function s(C=""){let D=C.length-1;return p(C)&&(C="\\left"+("{"==C[0]?"\\":"")+C.substring(0,D)+"\\right"+("}"==C[D]?"\\":"")+C[D]),C}let w=["\\func ","\\func{argp}","\\func{arg}","\\left\\lfunc argp \\right\\rfunc","\\begin{func}argppp\\end{func}","\\begin{func}argpp\\end{func}","\\begin{func}{args0}argsp1\\end{func}","\\func{argsp0}{argsp1}","\\func_{argsp0}^{argsp1}","\\func_{argsp0}","\\func[argsp1]{argsp0}","\\func{(argp)}"],x={accents:{hat:1,bar:1,dot:1,ddot:1,vec:1,overline:1,underline:1},delimiters:{"\\b":"\\backslash",ceil:3,floor:3,group:3,brack:3,brace:3,ucorner:"\\ulcorner argp \\urcorner",lcorner:"\\llcorner argp \\lrcorner",moustache:3,uparrow:0,downarrow:0,updownarrow:0,Downarrow:0,Updownarrow:0},environments:{matrix:4,pmatrix:4,vmatrix:4,Bmatrix:4,bmatrix:4,Vmatrix:4,array:6,darray:6,aligned:5,gathered:5,cases:5,dcases:5},letters:{Gamma:0,Delta:0,Theta:0,Lambda:0,Xi:0,Pi:0,Sigma:0,Upsilon:0,Phi:0,Psi:0,Omega:0,alpha:0,beta:0,gamma:0,delta:0,epsilon:0,zeta:0,eta:0,theta:0,iota:0,kappa:0,lambda:0,mu:0,nu:0,xi:0,omicron:0,pi:0,rho:0,sigma:0,tau:0,upsilon:0,phi:0,chi:0,psi:0,omega:0,varepsilon:0,varkappa:0,vartheta:0,varpi:0,varrho:0,varsigma:0,varphi:0,digamma:0,imath:0,jmath:0,aleph:0,beth:0,gimel:0,daleth:0,eth:0,Finv:0,Game:0,ell:0,hbar:0,hslash:0,Im:0,Re:0,wp:0,partial:0,nabla:0,Bbbk:0,infty:0},annotation:{cancel:1,bcancel:1,xcancel:1,sout:1,overbrace:1,underbrace:1,boxed:1},overlap:{llap:1,rlap:7},spacing:{quad:0,qquad:0,enspace:0,space:0,phantom:1,kern:"\\funcarg",stackrel:7,overset:7,underset:7,atop:0},logic:{forall:0,exists:0,nexists:0,"in":0,nin:"notin",notin:0,ni:0,complement:0,subset:0,supset:0,mid:0,land:0,lor:0,therefore:0,because:0,mapsto:0,to:0,gets:0,leftrightarrow:0,neg:0,lnot:0,implies:0,impliedby:0,iff:0},set:{emptyset:0,varnothing:0,"\\N":"\\mathbb{N}","\\Z":"\\mathbb{Z}","\\Q":"\\mathbb{Q}","\\A":"\\mathbb{A}","\\R":"\\mathbb{R}","\\C":"\\mathbb{C}","\\H":"\\mathbb{H}","\\O":"\\mathbb{O}","\\S":"\\mathbb{S}"},bigOperators:{sum:8,int:8,iint:8,iiint:8,oint:8,intop:8,smallint:8,prod:8,coprod:8,bigvee:8,bigwedge:8,bigcap:8,bigcup:8,bigsqcup:8,bigotimes:8,bigoplus:8,bigodot:8,biguplus:8},binOperators:{mod:0,bmod:0},binomialCoefficients:{binom:7,choose:0,dbinom:7,tbinom:7},operators:{pm:0,mp:0,times:0,arcsin:11,arccos:11,arctan:11,arctg:11,arcctg:11,arg:11,ch:11,cos:11,cosec:11,cosh:11,cot:11,cotg:11,coth:11,csc:11,ctg:11,cth:11,deg:11,dim:11,exp:11,hom:11,ker:11,lg:11,ln:11,sec:11,sin:11,sinh:11,sh:11,tan:11,tanh:11,tg:11,th:11,sqrt:"\\func[argsp1]{argsp0}",log:9,det:9,gcd:9,inf:9,lim:9,liminf:9,limsup:9,max:9,min:9,Pr:9,sup:9},relations:{"==":"equiv",equiv:0,"~=":"approx",approx:0,approxeq:0,asymp:0,between:0,"<=":"leq",leq:0,"=>":"geq",geq:0,owns:0,parallel:0,perp:0,"!=":"neq",neq:0,nparallel:0},extensibleArrows:{xrightarrow:10,xleftarrow:10,xleftrightarrow:10},color:{color:2,textcolor:"\\func{args0}{args1}"},font:{mathrm:1,textrm:1,rm:1},size:{Huge:0,"huge ":0,LARGE:0,Large:0,large:0,normalsize:0,small:0,footnotesize:0,scriptsize:0,tiny:0},style:{displaystyle:0,textstyle:0,scriptstyle:0,scriptscriptstyle:0,text:2,textnormal:2},symbols:{"%":"\\%","\xB0":"\\degree",cdots:0,ddots:0,ldots:0,vdots:0,angle:0,measuredangle:0,sphericalangle:0,checkmark:0,diagdown:0,diagup:0}},y={};for(var z in x)x.hasOwnProperty(z)&&Object.assign(y,x[z]);let A=Object.keys(y).sort((C,D)=>{return D.length-C.length}),B={"(":")","[":"]","{":"}"};return{parse:e,functionsByTopic:x,functions:y,functionsSorted:A}}();